<h2>Edit Post</h2>

<form action="/posts/edit/<%= post.id %>" method="POST" class="jr-form">

  <% if (errors && errors.length > 0) { %>
    <div style="
      background:#ffe4e4;
      border:1px solid #ff9a9a;
      padding:12px;
      border-radius:6px;
      margin-bottom:16px;
      color:#a30000;
      font-size:0.95rem;">
      <strong>Error:</strong>
      <ul>
        <% errors.forEach(err => { %>
          <li><%= err %></li>
        <% }) %>
      </ul>
    </div>
  <% } %>

  <!-- TITLE -->
  <label for="title">Title</label>
  <input 
    type="text" 
    id="title" 
    name="title"
    value="<%= formData.title || '' %>"
    class="<%= errors.includes('Title is required.') ? 'jr-input-error' : '' %>"
  />

  <!-- LINK -->
  <label for="link">Link (optional)</label>
  <input 
    type="url" 
    id="link" 
    name="link"
    value="<%= formData.link || '' %>"
    class="<%= errors.includes('You must provide a link OR a description.') ? 'jr-input-error' : '' %>"
  />

  <!-- DESCRIPTION -->
  <label for="description">Description (optional)</label>
  <textarea 
    id="description" 
    name="description"
    rows="4"
    class="<%= errors.includes('You must provide a link OR a description.') ? 'jr-input-error' : '' %>"
  ><%= formData.description || '' %></textarea>

  <!-- NOTE: SUBGROUP IS NOT EDITABLE -->
  <p class="jr-note">
    Subgroup: <strong>r/<%= post.subgroup %></strong><br>
    (Subgroups cannot be changed after creation.)
  </p>

  <button type="submit" class="jr-submit-btn">Save Changes</button>

</form>
